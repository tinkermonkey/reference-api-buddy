# Reference API Buddy

A python module which provides an embeddable HTTP-to-HTTPS caching proxy that offers intelligent caching, progressive throttling, and detailed metrics to reduce API costs and prevent rate limiting.

## Technology Stack

- **Language**: Python
- **Web Server**: http.server.ThreadingHTTPServer
- **Database**: SQLite or in-memory data structures
- **Test Framework**: pytest

## Code Structure

```text
/
├── documentation                                 # API and data model documentation
|   ├── requirements                              # High level requirements
|   ├── designs                                   # Designs for requirements
|   ├── copilot                                   # Reports and summaries generated by Copilot
├── reference_api_buddy                           # Core application code
|   ├── cache                                     # Cache engine
|   ├── core                                      # Core application logic
|   ├── database                                  # Database models and manager
|   ├── security                                  # Security manager
|   ├── throttling                                # Throttling manager
|   ├── utils                                     # Utility functions
|   ├── cli.py                                    # CLI entry point
├── pyproject.toml                                # Python dependencies
├── README.md                                     # Project documentation
├── smoke_tests                                   # Scripts for triaging overall functionality
├── tests                                         # Unit tests
|   ├── unit_tests                                # Unit tests for individual components
|   ├── integration_tests                         # Integration tests for API endpoints
|   ├── performance_tests                         # Performance tests for APIs
```

## Code Style
- Don't create documentation files unless explicitly requested
- All markdown reports and summaries other than README.md should be placed in the `documentation/copilot` directory
- Always place all import statements at the top of the file.
- Use snake_case for variable and function names.
- Use CamelCase for class names.
- Use triple double quotes for docstrings.
- Minimize dependencies to only those that are absolutely necessary to minimize module size.

## Best Practices
- **Code Quality**: Follow PEP 8 style guide for Python code.
- **Documentation**: Maintain clear and concise documentation for APIs and data models.
- **Testing**: Write unit tests for all critical functionalities using pytest. Write integration tests for API endpoints.
- **Environment Variables**: Use `.env` files for sensitive configurations and secrets.
- **Virtual Environment**: Use the `.venv` virtual environment when executing python commands, and activate it with `source .venv/bin/activate` before running the server or tests.

### Testing
- Use `pytest` for running tests.
- To avoid having to set `PYTHON_PATH` for each test run, update the system path in the test files:
```python
import sys
import os
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
```